#!/bin/bash

# qView å¿«é€Ÿæ‰“åŒ…è„šæœ¬
# ä¸€é”®ç¼–è¯‘å¹¶æ‰“åŒ…

echo "ğŸš€ å¼€å§‹ qView å¿«é€Ÿæ‰“åŒ…æµç¨‹..."

# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
echo "ğŸ“¦ æ¸…ç†æ—§æ–‡ä»¶..."
make clean 2>/dev/null || true

echo "ğŸ”¨ ç¼–è¯‘é¡¹ç›®..."
qmake qView.pro
make -j$(nproc)

if [ ! -f "bin/qview" ]; then
    echo "âŒ ç¼–è¯‘å¤±è´¥ï¼Œæœªæ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶"
    exit 1
fi

echo "âœ… ç¼–è¯‘å®Œæˆ"

# è¿è¡Œæ‰“åŒ…è„šæœ¬
echo "ğŸ“¦ å¼€å§‹æ‰“åŒ…..."
./build-deb.sh

echo "ğŸ‰ å…¨éƒ¨å®Œæˆï¼"
